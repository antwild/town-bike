<h1><%= @bike.bike_type %> - <%= @bike.make %> <%= @bike.model %></h1>

<div class="lets-book-container">
  <div class="bike-img-container">
   <%= cl_image_tag @bike.photo, width: 600 %>
  </div>
  <div class="bike-info-container">
    <div class="lets-book-card">
      <div class="lets-book-header">
        <h2>Let's Ride!</h2>
        <% @rating[:full_stars].times do |time| %>
          <i class="fas fa-star"></i>
        <% end %>
        <% @rating[:half_stars].times do |time| %>
          <i class="fas fa-star-half-alt"></i>
        <% end %>
        <% @rating[:empty_stars].times do |time| %>
          <i class="far fa-star"></i>
        <% end %>
        <hr>
      </div>
      <%= simple_form_for(Booking.new, :url => new_booking_path, :method => :get) do |f|%>
        <%= hidden_field_tag :bike_id, @bike.id %>
        <%= f.submit "Ride this Bike", class: "btn-ride" %>
      <% end %>
    </div>
    <div class="bike-owner-card">
      <div class="owner-details">
        <%= cl_image_tag @bike.owner.photo, class: "avatar"%>
        <h2><%= @bike.owner.first_name %> <%= @bike.owner.last_name %></h2>
      </div>
        <p>London, UK - joined <%= @bike.owner.created_at %></p>
        <hr>
      <div class="owner-description">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Autem molestiae pariatur totam dolor quas quam suscipit, enim cupiditate at doloribus placeat maxime sunt minus, fugiat dolores quod, repellendus ipsam debitis.</p>
      </div>
    </div>
  </div>
</div>

<div class="reviews-container">
  <% if @bike.reviews.present? %>
    <div class="reviews-header">
      <div class="reviews-summary">
        <h2><%= @bike.reviews.size %> Review<% if @bike.reviews.size > 1 %><span>s</span><% end %>
        </h2>
        <% @rating[:full_stars].times do |time| %>
            <i class="fas fa-star"></i>
          <% end %>
          <% @rating[:half_stars].times do |time| %>
            <i class="fas fa-star-half-alt"></i>
          <% end %>
          <% @rating[:empty_stars].times do |time| %>
            <i class="far fa-star"></i>
          <% end %>
      </div>
    </div>
    <hr>
    <% @bike.reviews.each do |review| %>
      <div class="review-item">
        <div class="review-header">

            <%= cl_image_tag review.booking.rider.photo, class: 'avatar' %>

          <div class="review-info">
            <h2><%= review.booking.rider.username %></h2>
            <!-- todo - format the date into MMM YYYY -->
            <p><%= review.created_at %></p>
          </div>
          <div class="review-stars">
            <% review.stars.times do |time| %>
              <i class="fas fa-star"></i>
            <% end %>
            <% (5 - review.stars).times do |time| %>
              <i class="far fa-star"></i>
            <% end %>
          </div>
        </div>
        <p><%= review.description %></p>
      </div>
      <hr>
    <% end %>
  <% else %>
    <h2>No reviews yet!</h2>
  <% end %>
</div>





